

Scenario: Update Department with empty department name and department id
Given I have a Department Resource
Given a Department Table
When I update a department (0031, 201, {'DepartmentName':{en:'',jp:''},'DepartmentID':'','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxType':'5'})
Then the result should be {0, 201,
|DPT	|DPTNAME       |DPTNAMELOCAL  |INHERITFLAG|NONSALES|SUBSMALLINT5|DISCOUNTTYPE|DISCOUNTAMT|DISCOUNTFLAG|DISCOUNTRATE|TAXRATE|TAXTYPE|
|201	|			   |		      |5|5|5|5|5.0|5|5.0|8|5|}


Scenario: Update Department with exceed length of DepartmentId and StoreId
Given I have a Department Resource
Given a Department Table
!-- StoreId exceeds to 6 characters
When I update a department (0000311, 01234567890123456789, {'DepartmentName':{en:'Test',jp:'テスト'},'DepartmentID':'','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {602}
!-- DepartmentId exceeds to 20 characters
When I update a department (000031, 01234567890123456789, {'DepartmentName':{en:'Test',jp:'テスト'},'DepartmentID':'012345678901234567899','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}
!-- DepartmentName exceeds to 40 characters
When I update a department (000031, 01234567890123456789, {'DepartmentName':{en:'Department1234567890123456789012345678901',jp:'部門1'},'DepartmentID':'','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}
!-- DepartmentName exceeds to 40 characters
When I update a department (000031, 01234567890123456789, {'DepartmentName':{en:'Department1',jp:'部門123456789012345678901234567890123456789'},'DepartmentID':'','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}

Scenario: Should Not Update Department With Deleted Status or Not Active Status
Given I have a Department Resource
Given a Department Table
!-- Deleted Status
When I update a department (0031, 100, {'DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {602}
!-- Neither Deleted Nor Active
When I update a department (0031, 101, {'DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {605}
!-- Null Status
When I update a department (0031, 102, {'DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {605}
!-- Empty Status
When I update a department (0031, 103, {'DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {605}


Scenario: Should Update to new StoreId and DepartmentId points to an existing deleted entry
Given I have a Department Resource
Given a Department Table
!--
When I update a department (0031, 205, {'DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'RetailStoreID':'0031','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {0}


Scenario: Should Update to new StoreId and DepartmentId points to an existing deleted entry with RetailStoreID and DepartmentID
Given I have a Department Resource
Given a Department Table
!--
When I update a department (0031, 205, { 'DepartmentID':'100','DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'RetailStoreID':'0031','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {0}

When I update a department (0031, 100, { 'DepartmentID':'205','DepartmentName':{en:'Department 100 updated',jp:'部門100に更新'},'RetailStoreID':'0031','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {0}

Scenario: Database throw Exceptions
Given I have a Department Resource
Given that database is throwing an unexpected {DaoException}
When I update a department (0031, 201, {'DepartmentName':{en:'Department 201 updated',jp:'部門201に更新'},'DepartmentID':'201','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}
Given that database is throwing an unexpected {SQLException}
When I update a department (0031, 201, {'DepartmentName':{en:'Department 201 updated',jp:'部門201に更新'},'DepartmentID':'201','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}
Given that database is throwing an unexpected {SQLStatementException}
When I update a department (0031, 201, {'DepartmentName':{en:'Department 201 updated',jp:'部門201に更新'},'DepartmentID':'201','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {139}
Given that database is throwing an unexpected {Exception}
When I update a department (0031, 201, {'DepartmentName':{en:'Department 201 updated',jp:'部門201に更新'},'DepartmentID':'201','InheritFlag':'5','NonSales':'5','SubSmallInt5':'5','DiscountType':'5','DiscountFlag':'5','DiscountAmt':'5','DiscountRate':'5','TaxRate':'5','TaxType':'5'})
Then the error result should be {133}