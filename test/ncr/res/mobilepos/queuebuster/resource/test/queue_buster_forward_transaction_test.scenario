Scenario: Implementation for Suspending transaction(QueueBuster)
Given a QueueBuster Service
Given a table entry named {FORWARD_ITEM_TABLE_EMPTY.xml} in the database
When a request to forward an incomplete transaction for QueueBustering with Poslogxml:
<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>000001</RetailStoreID><WorkstationID>5006</WorkstationID><SequenceNumber>0001</SequenceNumber><BusinessDayDate>2012-05-29</BusinessDayDate><BeginDateTime>2012-05-29T18:30:46</BeginDateTime><OperatorID>111</OperatorID><ReceiptDateTime>2012-05-29T18:30:46</ReceiptDateTime><RetailTransaction Version="2.2" TransactionStatus="Canceled"><ItemCount>2</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000123973</ItemID><Description>????????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000272152</ItemID><Description>BAT ?????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem></RetailTransaction></Transaction></POSLog>

Then returned Result Code should be {OK}
Then I should have the following transaction:
|storeid|termid|txid|txdate|queue|status|
|000001|5006|0001|2012-05-29|0|0|
Then resultcode should be 0
Then status should be 0


!-- Save another Incomplete Transaction for Queue Bustering
When a request to forward an incomplete transaction for QueueBustering with Poslogxml:
<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>000001</RetailStoreID><WorkstationID>5006</WorkstationID><SequenceNumber>0002</SequenceNumber><BusinessDayDate>2012-05-30</BusinessDayDate><BeginDateTime>2012-05-29T18:31:11</BeginDateTime><OperatorID>111</OperatorID><ReceiptDateTime>2012-05-29T18:31:11</ReceiptDateTime><CustomerID></CustomerID><RetailTransaction Version="2.2" TransactionStatus="Canceled"><ItemCount>2</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000123973</ItemID><Description>????????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000272152</ItemID><Description>BAT ?????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem></RetailTransaction></Transaction></POSLog>

Then returned Result Code should be {OK}
Then I should have the following transaction:
|storeid|termid|txid|txdate|queue|status|
|000001|5006|0001|2012-05-29|0|0|
|000001|5006|0002|2012-05-30|0|0|
Then resultcode should be 0
Then status should be 0

!-- Save another Existing Transaction for Queue Bustering
When a request to forward an incomplete transaction for QueueBustering with Poslogxml:
<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>000001</RetailStoreID><WorkstationID>5006</WorkstationID><SequenceNumber>0002</SequenceNumber><BusinessDayDate>2012-05-30</BusinessDayDate><BeginDateTime>2012-05-29T18:31:11</BeginDateTime><OperatorID>111</OperatorID><ReceiptDateTime>2012-05-29T18:31:11</ReceiptDateTime><CustomerID></CustomerID><RetailTransaction Version="2.2" TransactionStatus="Canceled"><ItemCount>2</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000123973</ItemID><Description>????????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Sale TaxableFlag="true" Department="0181" Line="0181" Class="000001"><ItemID>0000000272152</ItemID><Description>BAT ?????????</Description><ActualSalesUnitPrice>440</ActualSalesUnitPrice><ExtendedAmount>440</ExtendedAmount><Quantity>1</Quantity></Sale></LineItem></RetailTransaction></Transaction></POSLog>
Then returned Result Code should be {TRANSACTION_ALREADY_SAVED}
Then I should have the following transaction:
|storeid|termid|txid|txdate|queue|status|
|000001|5006|0001|2012-05-29|0|0|
|000001|5006|0002|2012-05-30|0|0|
Then resultcode should be 148
Then status should be 1

!-- Save Transaction with No PosLog for Queue Bustering
When a request to forward an incomplete transaction for QueueBustering with Poslogxml:
<?xml version="1.0" encoding="UTF-8" ?><POSLog></POSLog>
Then returned Result Code should be {DB_ERROR}
Then I should have the following transaction:
|storeid|termid|txid|txdate|queue|status|
|000001|5006|0001|2012-05-29|0|0|
|000001|5006|0002|2012-05-30|0|0|
Then resultcode should be 134
Then status should be 1