Scenario: Journalize & Re-journalize Donation Transaction (Duplicate)
Given a Journalization Resource
Given a RESMaster DBInitiator
Given MST_DEVICEINFO table
Given a RESTransaction DBInitiator
Given TXL_SALES_JOURNAL is empty
When executing journal log with xml{<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>}
	and operatorno{001}
Then result should be {OK}
Then txid should be 8521
Then status should be {OK}
Then table {TXL_SALES_JOURNAL} will have {1} row(s)
Then the TXL_SALES_JOURNAL database table should have the following row(s):
|RetailStoreId|WorkstationId|SequenceNumber|BusinessDayDate|SystemDateTime       |TxType|ServerId|Tx
|0031         |4567         |8521          |2014-03-28     |2014-03-28 17:44:20.0|PayIn |A010    |<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>

!-- Re-journalize Previous Donation Transaction
When executing journal log with xml{<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note<Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note<Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note<Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>
	and operatorno{001}
Then result should be {OK}
Then txid should be 8521
Then status should be {OK}
Then table {TXL_SALES_JOURNAL} will have {1} row(s)
Then the TXL_SALES_JOURNAL database table should have the following row(s):
|RetailStoreId|WorkstationId|SequenceNumber|BusinessDayDate|SystemDateTime       |TxType|ServerId|Tx
|0031         |4567         |8521          |2014-03-28     |2014-03-28 17:44:20.0|PayIn |A010    |<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note<Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note<Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note<Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>

Scenario: Journalize Transaction where AccountNumber != 1
Given a Journalization Resource
Given a RESTransaction DBInitiator
Given TXL_SALES_JOURNAL is empty
When executing journal log with xml{<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>2</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>}
	and operatorno{001}
Then result should be {OK}
Then table {TXL_SALES_JOURNAL} will have {1} row(s)
Then the TXL_SALES_JOURNAL database table should have the following row(s):
|RetailStoreId|WorkstationId|SequenceNumber|BusinessDayDate|SystemDateTime       |TxType|ServerId|Tx
|0031         |4567         |8521          |2014-03-28     |2014-03-28 17:44:20.0|Other |A010    |<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>8521</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>2</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>

Scenario: Journalize Donation Transaction (5-digit Transaction Number)
Given a Journalization Resource
Given a RESMaster DBInitiator
Given MST_DEVICEINFO table
Given a RESTransaction DBInitiator
Given TXL_SALES_JOURNAL is empty
When executing journal log with xml{<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>12345</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>}
	and operatorno{001}
Then result should be {OK}
Then txid should be 12345
Then status should be {OK}
Then table {TXL_SALES_JOURNAL} will have {1} row(s)
Then the TXL_SALES_JOURNAL database table should have the following row(s):
|RetailStoreId|WorkstationId|SequenceNumber|BusinessDayDate|SystemDateTime       |TxType|ServerId|Tx
|0031         |4567         |12345         |2014-03-28     |2014-03-28 17:44:20.0|PayIn |A010    |<?xml version="1.0" encoding="UTF-8" ?><POSLog><Transaction><RetailStoreID>0031</RetailStoreID><WorkstationID>4567</WorkstationID><SequenceNumber>12345</SequenceNumber><BusinessDayDate>2014-03-28</BusinessDayDate><BeginDateTime>2014-03-28T17:44:20</BeginDateTime><OperatorID>001</OperatorID><ReceiptDateTime>2014-03-28T17:44:20</ReceiptDateTime><TillID>0</TillID><RetailTransaction><Customer><CustomerDemographic>02</CustomerDemographic></Customer><ItemCount>3</ItemCount><LineItem><SequenceNumber>1</SequenceNumber><PaymentOnAccount AccountCode="Unspecified"><AccountNumber>1</AccountNumber><Amount>500</Amount><Note>PaymentOnAccount Note</Note></PaymentOnAccount></LineItem><LineItem><SequenceNumber>2</SequenceNumber><Tender TenderType="Cash"><Amount>1000</Amount><TenderChange><Amount>500</Amount></TenderChange><Note>Tender Note</Note></Tender></LineItem><LineItem><SequenceNumber>3</SequenceNumber><Tax TaxType="Sales"><Amount>0</Amount><Percent>0</Percent><TaxableAmount TaxIncludedInTaxableAmountFlag="false">0</TaxableAmount><Note>Tax Note</Note></Tax></LineItem><Total TotalType="TransactionSubtotal">500</Total><Total TotalType="TransactionGrandAmount">500</Total></RetailTransaction></Transaction></POSLog>
