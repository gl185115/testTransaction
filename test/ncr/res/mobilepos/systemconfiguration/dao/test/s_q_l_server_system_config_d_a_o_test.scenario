Scenario: Get all the System Parameters
Given a batch of values for System Configuration named PRM_SYSTEM_CONFIG_SUCCESS.xml
Given an instance of SQLServerSystemConfigDAO
Then its Database Manager must have been settled
When all parameters are retrieved
Then I should have the following parameters
|Key|Value|
|MaxTransactionCount|99999|
|RoundingConsumptionTax|1|
|NumberOfPasscodeDigits|3|
|MaxLengthOfOperatorNo|8|
|CredentialCookiesExpiry|144|
|DefaultLanguage|en|
|TaxRate|5|
|AuthExpiry|240|
|AdminKey|admin|
|RegistrationPasscode|123|
|RegistrationPasscodeExpiry|2012-12-31 23:59:59|
|CookiesExpiry|264|
|CredentialExpiry|120|
|EmailAddress|postmaster@res.ncr.local|
|SecurityPhrase|security|
|MerchantPassword|1234567890|
|MerchatnId|2S699920000000|
|PassPhrase|passphrase|
|SignlessThreshold|10000|
|Port|25|
|EmailSubject|Receipt of Transaction No. %s|
|BusinessDateComputeFlag|true|
|SwitchTime|1:00am|
|StoreOpenTime|10|
|AllowManualRegistration|true|
|DiscountInputMethod|PRM_DISCOUNT_BUTTONS|
|InStoreParam1|02,10|
|InStoreParam2|20,10|
|InStoreParam3|21,10|
|InStoreParam4|22,10|
|InStoreParam5|23,10|
|InStoreParam6|24,10|
|InStoreParam7|25,10|
|InStoreParam8|26,10|
|InStoreParam9|27,10|
|InStoreParam10|28,6|
|InStoreParam11|29,5|
|Flag|true|
|KeyValue|11111111111111111111111111111111|
|BadgeCountType|1|
|MaxSearchResults|10|
|DisableItemConsolidation|true|
|CustomerTier|Disabled|
|LoginBehavior|1|
|CredentialDayLeftWarning|7|
|PricingType|0|
|Method|Cash|
|serverUri|https://pos.point-tactix.jp/p-fantamiliar-pos/main.do|
|corpId|RNC00|
|rate1|1|
|rate2|1|
|rate3|1|
|Category|fantamiliar|
|Range1|50000,1000000,200|
|Range2|1000001,2000000,400|
|Range3|2000001,3000000,600|
|Range4|3000001,5000000,1000|
|Range5|5000001,10000000,2000|
|Range6|10000001,20000000,4000|
|Range7|20000001,30000000,6000|
|Range8|30000001,50000000,10000|
|Range9|50000001,100000000,20000|
|Range10|100000001,UNLIMITED,40000|
|Drawer|0|
|DrawerAutoOpen|true|

Scenario: Get an existing value of a System Parameter
!-- [Authentication]
When I want to get a value from parameter named {AdminKey} in {Authentication} category
Then I should have {AdminKey} value of {admin}
When I want to get a value from parameter named {AllowManualRegistration} in {Authentication} category
Then I should have {AllowManualRegistration} value of {true}
When I want to get a value from parameter named {AuthExpiry} in {Authentication} category
Then I should have {AuthExpiry} value of {240}
When I want to get a value from parameter named {RegistrationPasscode} in {Authentication} category
Then I should have {RegistrationPasscode} value of {123}
When I want to get a value from parameter named {RegistrationPasscodeExpiry} in {Authentication} category
Then I should have {RegistrationPasscodeExpiry} value of {2012-12-31 23:59:59}

!-- [Credential]
When I want to get a value from parameter named {CredentialCookiesExpiry} in {Credential} category
Then I should have {CredentialCookiesExpiry} value of {144}
When I want to get a value from parameter named {CredentialExpiry} in {Credential} category
Then I should have {CredentialExpiry} value of {120}
When I want to get a value from parameter named {MaxLengthOfOperatorNo} in {Credential} category
Then I should have {MaxLengthOperatorNo} value of {8}
When I want to get a value from parameter named {NumberOfPasscodeDigits} in {Credential} category
Then I should have {NumberOfPasscodeDigits} value of {3}
When I want to get a value from parameter named {LoginBehavior} in {Credential} category
Then I should have {LoginBehavior} value of {1}
When I want to get a value from parameter named {CredentialDayLeftWarning} in {Credential} category
Then I should have {CredentialDayLeftWarning} value of {7}
!-- [Journalization]
When I want to get a value from parameter named {BusinessDateComputeFlag} in {Journalization} category
Then I should have {BusinessDateComputeFlag} value of {true}
When I want to get a value from parameter named {SwitchTime} in {Journalization} category
Then I should have {SwitchTime} value of {1:00am}

!-- [Language]
When I want to get a value from parameter named {DefaultLanguage} in {Language} category
Then I should have {DefaultLanguage} value of {en}

!-- [NetworkReceipt] 
When I want to get a value from parameter named {EmailAddress} in {NetworkReceipt} category
Then I should have {EmailAddress} value of {postmaster@res.ncr.local}
When I want to get a value from parameter named {EmailSubject} in {NetworkReceipt} category
Then I should have {EmailSubject} value of {Receipt of Transaction No. %s}
When I want to get a value from parameter named {Port} in {NetworkReceipt} category
Then I should have {Port} value of {25}

!-- [Pricing] 
When I want to get a value from parameter named {RoundingConsumptionTax} in {Pricing} category
Then I should have {RoundingConsumptionTax} value of {1}
When I want to get a value from parameter named {TaxRate} in {Pricing} category
Then I should have {TaxRate} value of {5}

!-- [Report]
When I want to get a value from parameter named {StoreOpenTime} in {Report} category
Then I should have {StoreOpenTime} value of {10}

!-- [SignatureCapture]
When I want to get a value from parameter named {MerchantPassword} in {SignatureCapture} category
Then I should have {MerchantPassword} value of {1234567890}
When I want to get a value from parameter named {MerchatnId} in {SignatureCapture} category
Then I should have {MerchatnId} value of {2S699920000000}
When I want to get a value from parameter named {PassPhrase} in {SignatureCapture} category
Then I should have {PassPhrase} value of {passphrase}
When I want to get a value from parameter named {SecurityPhrase} in {SignatureCapture} category
Then I should have {SecurityPhrase} value of {security}
When I want to get a value from parameter named {SignlessThreshold} in {CreditCardPayment} category
Then I should have {SignlessThreshold} value of {10000}

!-- [Cart]
When I want to get a value from parameter named {BadgeCountType} in {Cart} category
Then I should have {BadgeCountType} value of {1}

!-- [Non-Existing]
When I want to get a value from parameter named {???????} in {Authentication} category
Then I should have {???????} value of {}
When I want to get a value from parameter named {StoreOpenTime} in {??????} category
Then I should have {StoreOpenTime} value of {}
When I want to get a value from parameter named {XXXXXX} in {?????} category
Then I should have {XXXXXX} value of {}

Scenario: Get a System Parameter and expect a BOOLEAN return
!-- [Existing and Valid Parameter]
When I want to get a BOOLEAN value from parameter named {BusinessDateComputeFlag} in {Journalization} category
Then I should have {BusinessDateComputeFlag} boolean value of {true}
When I want to get a BOOLEAN value from parameter named {AllowManualRegistration} in {Authentication} category
Then I should have {AllowManualRegistration} boolean value of {true}

!-- [Existing and INValid Parameter]
When I want to get a BOOLEAN value from parameter named {RoundingConsumptionTax} in {Pricing} category
Then I should have {RoundingConsumptionTax} boolean value of {false}

!-- [Non-Existing]
When I want to get a BOOLEAN value from parameter named {???????} in {Authentication} category
Then I should have {???????} boolean value of {false}
When I want to get a BOOLEAN value from parameter named {StoreOpenTime} in {??????} category
Then I should have {StoreOpenTime} boolean value of {false}
When I want to get a BOOLEAN value from parameter named {XXXXXX} in {?????} category
Then I should have {XXXXXX} boolean value of {false}

Scenario: Set System Parameters value
When I want to update the following parameters
|Key|Value|Category|
|RoundingConsumptionTax|2|Pricing|
|TaxRate|10|Pricing|
|AuthExpiry|24|Authentication|
|AdminKey|adminis|Authentication|
|RegistrationPasscode|1232|Authentication|
|RegistrationPasscodeExpiry|2013-12-31 23:59:59|Authentication|
|CookiesExpiry|262|Authentication|
|CredentialExpiry|124|Credential|
|EmailAddress|postmaster2@res.ncr.local|NetworkReceipt|
|Port|80|NetworkReceipt|
|EmailSubject|Transaction No. %s|NetworkReceipt|
|BusinessDateComputeFlag|false|Journalization|
|SwitchTime|2:00am|Journalization|
|StoreOpenTime|11|Report|
|AllowManualRegistration|false|Authentication|
|MaxLengthOfOperatorNo|5|Credential|
|NumberOfPasscodeDigits|2|Credential|
|CredentialCookiesExpiry|145|Credential|
|DefaultLanguage|ja|Language|
|MaxTransactionCount|99999|Journalization|
|MerchantPassword|1234567890|SignatureCapture|
|MerchatnId|2S699920000000|SignatureCapture|
|PassPhrase|passphrase|SignatureCapture|
|SecurityPhrase|security|SignatureCapture|
|SignlessThreshold|20000|CreditCardPayment|
|BadgeCountType|1|Cart|
|DisableItemConsolidation|true|Cart|
|CustomerTier|Disabled|Cart|
|LoginBehavior|3|Credential|
|CredentialDayLeftWarning|6|Credential|
|DiscountInputMethod|PRM_DISCOUNT_BUTTONS|
|PricingType|0|
|Method|Cash|
|serverUri|https://pos.point-tactix.jp/p-fantamiliar-pos/main.do|
|corpId|RNC00|
|rate1|1|
|rate2|1|
|rate3|1|
|Category|fantamiliar|

When all parameters are retrieved

Then I should have the following parameters
|Key|Value|
|MaxTransactionCount|99999|
|RoundingConsumptionTax|2|
|NumberOfPasscodeDigits|2|
|MaxLengthOfOperatorNo|5|
|CredentialCookiesExpiry|145|
|DefaultLanguage|ja|
|TaxRate|10|
|AuthExpiry|24|
|AdminKey|adminis|
|RegistrationPasscode|1232|
|RegistrationPasscodeExpiry|2013-12-31 23:59:59|
|CookiesExpiry|262|
|CredentialExpiry|124|
|EmailAddress|postmaster2@res.ncr.local|
|SecurityPhrase|security|
|MerchantPassword|1234567890|
|MerchatnId|2S699920000000|
|PassPhrase|passphrase|
|SignlessThreshold|20000|
|Port|80|
|EmailSubject|Transaction No. %s|
|BusinessDateComputeFlag|false|
|SwitchTime|2:00am|
|StoreOpenTime|11|
|AllowManualRegistration|false|
|DiscountInputMethod|PRM_DISCOUNT_BUTTONS|
|InStoreParam1|02,10|
|InStoreParam2|20,10|
|InStoreParam3|21,10|
|InStoreParam4|22,10|
|InStoreParam5|23,10|
|InStoreParam6|24,10|
|InStoreParam7|25,10|
|InStoreParam8|26,10|
|InStoreParam9|27,10|
|InStoreParam10|28,6|
|InStoreParam11|29,5|
|Flag|true|
|KeyValue|11111111111111111111111111111111|
|BadgeCountType|1|
|MaxSearchResults|10|
|DisableItemConsolidation|true|
|CustomerTier|Disabled|
|LoginBehavior|3|
|CredentialDayLeftWarning|6|
|PricingType|0|
|Method|Cash|
|serverUri|https://pos.point-tactix.jp/p-fantamiliar-pos/main.do|
|corpId|RNC00|
|rate1|1|
|rate2|1|
|rate3|1|
|Category|fantamiliar|
|Range1|50000,1000000,200|
|Range2|1000001,2000000,400|
|Range3|2000001,3000000,600|
|Range4|3000001,5000000,1000|
|Range5|5000001,10000000,2000|
|Range6|10000001,20000000,4000|
|Range7|20000001,30000000,6000|
|Range8|30000001,50000000,10000|
|Range9|50000001,100000000,20000|
|Range10|100000001,UNLIMITED,40000|
|Drawer|0|
|DrawerAutoOpen|true|

Scenario: Add System Parameters value
When I want to add the following parameters
|Key|Value|Category|Description|
|CompanyID|000000000000|Store|The Store Company ID|

When all parameters are retrieved
Then I should have the following parameters
|Key|Value|
|MaxTransactionCount|99999|
|RoundingConsumptionTax|2|
|NumberOfPasscodeDigits|2|
|MaxLengthOfOperatorNo|5|
|CredentialCookiesExpiry|145|
|DefaultLanguage|ja|
|TaxRate|10|
|AuthExpiry|24|
|AdminKey|adminis|
|RegistrationPasscode|1232|
|RegistrationPasscodeExpiry|2013-12-31 23:59:59|
|CookiesExpiry|262|
|CredentialExpiry|124|
|EmailAddress|postmaster2@res.ncr.local|
|SecurityPhrase|security|
|MerchantPassword|1234567890|
|MerchatnId|2S699920000000|
|PassPhrase|passphrase|
|SignlessThreshold|20000|
|Port|80|
|EmailSubject|Transaction No. %s|
|BusinessDateComputeFlag|false|
|SwitchTime|2:00am|
|StoreOpenTime|11|
|AllowManualRegistration|false|
|DiscountInputMethod|PRM_DISCOUNT_BUTTONS|
|InStoreParam1|02,10|
|InStoreParam2|20,10|
|InStoreParam3|21,10|
|InStoreParam4|22,10|
|InStoreParam5|23,10|
|InStoreParam6|24,10|
|InStoreParam7|25,10|
|InStoreParam8|26,10|
|InStoreParam9|27,10|
|InStoreParam10|28,6|
|InStoreParam11|29,5|
|Flag|true|
|KeyValue|11111111111111111111111111111111|
|BadgeCountType|1|
|MaxSearchResults|10|
|DisableItemConsolidation|true|
|CustomerTier|Disabled|
|LoginBehavior|3|
|CredentialDayLeftWarning|6|
|PricingType|0|
|Method|Cash|
|serverUri|https://pos.point-tactix.jp/p-fantamiliar-pos/main.do|
|corpId|RNC00|
|rate1|1|
|rate2|1|
|rate3|1|
|Category|fantamiliar|
|Range1|50000,1000000,200|
|Range2|1000001,2000000,400|
|Range3|2000001,3000000,600|
|Range4|3000001,5000000,1000|
|Range5|5000001,10000000,2000|
|Range6|10000001,20000000,4000|
|Range7|20000001,30000000,6000|
|Range8|30000001,50000000,10000|
|Range9|50000001,100000000,20000|
|Range10|100000001,UNLIMITED,40000|
|CompanyID|000000000000|Store|
|Drawer|0|
|DrawerAutoOpen|true|
|OpenDrawer|Cash,GiftCard,GiftCertificate|