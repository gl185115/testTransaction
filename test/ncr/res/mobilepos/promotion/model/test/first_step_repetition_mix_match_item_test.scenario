Scenario: Test FirstStepRepetitionMixMatchItem
Given a MixMatchData of the following:
|MMCode|MMQ|MMP|MMDescription|TYPE|
|0001  |3  |100|Discount100x3|1   |

!-- SINGLE ENTRIES (One Item_Entry)
!-- 1ST Entry [Add entry with 1 quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemA |40   |1  |0001       |
When I compute discount of 1stStepRepetition
Then I should get {0} discounts

!-- 2ND Entry [Add entry with 1 quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemB |40   |1  |0002       |
When I compute discount of 1stStepRepetition
Then I should get {0} discounts

!-- 3RD Entry [Add entry with 1 quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemB |40   |1  |0003       |
When I compute discount of 1stStepRepetition
Then I should get {3} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0003       |7              |
|2       |0001          |0001         |Discount100x3  |0002       |7              |
|3       |0001          |0001         |Discount100x3  |0001       |6              |

!-- 4TH Entry [Add entry with 2 quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemB |40   |2  |0004       |
When I compute discount of 1stStepRepetition
Then I should get {3} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0004       |7              |
|1       |0001          |0001         |Discount100x3  |0004       |7              |
|2       |0001          |0001         |Discount100x3  |0003       |6              |

!-- 5TH Entry [Add entry with 1 quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemB |40   |1  |0005       |
When I compute discount of 1stStepRepetition
Then I should get {6} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0005       |7              |
|2       |0001          |0001         |Discount100x3  |0004       |7              |
|2       |0001          |0001         |Discount100x3  |0004       |6              |
|3       |0001          |0001         |Discount100x3  |0003       |7              |
|4       |0001          |0001         |Discount100x3  |0002       |7              |
|5       |0001          |0001         |Discount100x3  |0001       |6              |

!-- 6TH Entry [Add entry with 3 quantity: Exact Number of Quantity]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemB |40   |3  |0006       |
When I compute discount of 1stStepRepetition
Then I should get {9} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0006       |7              |
|1       |0001          |0001         |Discount100x3  |0006       |7              |
|1       |0001          |0001         |Discount100x3  |0006       |6              |
|2       |0001          |0001         |Discount100x3  |0005       |7              |
|3       |0001          |0001         |Discount100x3  |0004       |7              |
|3       |0001          |0001         |Discount100x3  |0004       |6              |
|4       |0001          |0001         |Discount100x3  |0003       |7              |
|5       |0001          |0001         |Discount100x3  |0002       |7              |
|6       |0001          |0001         |Discount100x3  |0001       |6              |

!-- BUNDLE ENTRIES (Two or More Item_Entry)
!-- 7TH Entry [Add entry with 4 quantity of different items]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemA |40   |2  |0007       |
|ItemB |40   |2  |0008       |
When I compute discount of 1stStepRepetition
Then I should get {12} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0008       |7              |
|1       |0001          |0001         |Discount100x3  |0008       |7              |
|2       |0001          |0001         |Discount100x3  |0007       |6              |
|3       |0001          |0001         |Discount100x3  |0007       |7              |
|4       |0001          |0001         |Discount100x3  |0006       |7              |
|4       |0001          |0001         |Discount100x3  |0006       |6              |
|5       |0001          |0001         |Discount100x3  |0006       |7              |
|6       |0001          |0001         |Discount100x3  |0005       |7              |
|7       |0001          |0001         |Discount100x3  |0004       |6              |
|8       |0001          |0001         |Discount100x3  |0004       |7              |
|9       |0001          |0001         |Discount100x3  |0003       |7              |
|10       |0001         |0001         |Discount100x3 |0002       |6              |

!-- 8TH Entry [Add entry with 5 quantity of different items with 1 unconsolidated item from previous entry]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemA |40   |2  |0009       |
|ItemB |40   |3  |0010       |
When I compute discount of 1stStepRepetition
Then I should get {18} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0010       |7              |
|1       |0001          |0001         |Discount100x3  |0010       |7              |
|1       |0001          |0001         |Discount100x3  |0010       |6              |
|2       |0001          |0001         |Discount100x3  |0009       |7              |
|2       |0001          |0001         |Discount100x3  |0009       |7              |
|3       |0001          |0001         |Discount100x3  |0008       |6              |
|4       |0001          |0001         |Discount100x3  |0008       |7              |
|5       |0001          |0001         |Discount100x3  |0007       |7              |
|5       |0001          |0001         |Discount100x3  |0007       |6              |
|6       |0001          |0001         |Discount100x3  |0006       |7              |
|6       |0001          |0001         |Discount100x3  |0006       |7              |
|6       |0001          |0001         |Discount100x3  |0006       |6              |
|7       |0001          |0001         |Discount100x3  |0005       |7              |
|8       |0001          |0001         |Discount100x3  |0004       |7              |
|8       |0001          |0001         |Discount100x3  |0004       |6              |
|9       |0001          |0001         |Discount100x3  |0003       |7              |
|10      |0001          |0001         |Discount100x3  |0002      |7               |
|11      |0001          |0001         |Discount100x3 |0001       |6               |

!-- 9TH Entry [Add entry of different items with different price]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemA |50   |1  |0011       |
|ItemB |40   |1  |0012       |
|ItemC |40   |1  |0013       |
When I compute discount of 1stStepRepetition
Then I should get {21} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0011       |12             |
|2       |0001          |0001         |Discount100x3  |0013       |9              |
|3       |0001          |0001         |Discount100x3  |0012       |9              |
|4       |0001          |0001         |Discount100x3  |0010       |7              |
|4       |0001          |0001         |Discount100x3  |0010       |7              |
|4       |0001          |0001         |Discount100x3  |0010       |6              |
|5       |0001          |0001         |Discount100x3  |0009       |7              |
|5       |0001          |0001         |Discount100x3  |0009       |7              |
|6       |0001          |0001         |Discount100x3  |0008       |6              |
|7       |0001          |0001         |Discount100x3  |0008       |7              |
|8       |0001          |0001         |Discount100x3  |0007       |7              |
|8       |0001          |0001         |Discount100x3  |0007       |6              |
|9       |0001          |0001         |Discount100x3  |0006       |7              |
|9       |0001          |0001         |Discount100x3  |0006       |7              |
|9       |0001          |0001         |Discount100x3  |0006       |6              |
|10      |0001          |0001         |Discount100x3  |0005       |7              |
|11      |0001          |0001         |Discount100x3  |0004       |7              |
|11      |0001          |0001         |Discount100x3  |0004       |6              |
|12      |0001          |0001         |Discount100x3  |0003       |7              |
|13      |0001          |0001         |Discount100x3  |0002       |7              |
|14      |0001          |0001         |Discount100x3  |0001       |6              |

!-- 10TH Entry [Add entry of different items with different price]
When I add item to sale:
|name  |price|qty|itementryid|
|ItemA |50   |3  |0014       |
|ItemB |40   |2  |0015       |
|ItemC |30   |1  |0016       |
When I compute discount of 1stStepRepetition
Then I should get {27} discounts
Then I should get list of discounts of the following:
|rewardid|earnedrewardid|promotioncode|discdescription|itementryid|unitdiscountamt|
|1       |0001          |0001         |Discount100x3  |0014       |17             |
|1       |0001          |0001         |Discount100x3  |0014       |17             |
|1       |0001          |0001         |Discount100x3  |0014       |16             |
|2       |0001          |0001         |Discount100x3  |0011       |12             |
|3       |0001          |0001         |Discount100x3  |0015       |9              |
|3       |0001          |0001         |Discount100x3  |0015       |9              |
|4       |0001          |0001         |Discount100x3  |0013       |7              |
|5       |0001          |0001         |Discount100x3  |0012       |7              |
|6       |0001          |0001         |Discount100x3  |0010       |6              |
|7       |0001          |0001         |Discount100x3  |0010       |7              |
|7       |0001          |0001         |Discount100x3  |0010       |7              |
|8       |0001          |0001         |Discount100x3  |0009       |6              |
|9       |0001          |0001         |Discount100x3  |0009       |7              |
|10      |0001          |0001         |Discount100x3  |0008       |7              |
|10      |0001          |0001         |Discount100x3  |0008       |6              |
|11      |0001          |0001         |Discount100x3  |0007       |7              |
|11      |0001          |0001         |Discount100x3  |0007       |7              |
|12      |0001          |0001         |Discount100x3  |0006       |6              |
|13      |0001          |0001         |Discount100x3  |0006       |7              |
|13      |0001          |0001         |Discount100x3  |0006       |7              |
|14      |0001          |0001         |Discount100x3  |0005       |6              |
|15      |0001          |0001         |Discount100x3  |0004       |7              |
|15      |0001          |0001         |Discount100x3  |0004       |7              |
|16      |0001          |0001         |Discount100x3  |0003       |6              |
|17      |0001          |0001         |Discount100x3  |0002       |4              |
|18      |0001          |0001         |Discount100x3  |0001       |4              |
|19      |0001          |0001         |Discount100x3  |0016       |2              |