Story: Get Peripheral Device Info 

Scenario: Test Get Peripheral Device Info from DeviceInfo service for an existing device with printer already set and existing (Get also printer information)
Given an initial deviceinfo entry in database
Given entries in MST_PRINTERINFO database table
Then I should have the following rows in MST_PRINTERINFO:
|storeid|printerid|printername       		|description            		|ipaddress|portnumtcp|portnumudp|
|000031 |101      |Test Printer 1    		|Unit test printer 1   	 		|localhost|0         |0         |
|000031 |102      |Test Printer 2    		|Unit test printer 2   	 		|localhost|0         |0         |
|000031 |105      |Test Printer 5    		|Unit test printer 5    		|localhost|0         |0         |
|000031 |110      |Test Printer Deleted		|Unit test printer Deleted	    |localhost|0         |0         |
|000032 |103      |Test Printer 3    		|Unit test printer 3    		|localhost|0         |0         |
|000032 |104      |Test Printer 4    		|Unit test printer 4    		|localhost|0         |0         |
|000032 |105      |Alt Test Printer 5		|Alt Unit test printer 5		|localhost|0         |0         |
|000032 |106      |Alt Test Printer Deleted	|Alt Unit test printer Deleted	|localhost|0         |0         |
|000035 |335      |Alt Test Printer 335	|Alt Unit test printer 335	|localhost|0         |0         |

Then I should have the following rows in MST_DEVICEINFO:
|storeid|terminalid|devicename|printerid|tillid|linkposterminalid|sendlogfile|savelogfile|autoupload|linkqueuebuster|linkauthorization|linksignature|
|000031 |9990      |DeviceName|999      |123|1234             |0          |0          |0         |2              |2                |2            |
|000031 |9997      |DeviceName|0        |123|1234             |0          |0          |0         |5              |5                |5            |
|000031 |9998      |DeviceName|0        |123|1234             |0          |0          |0         |3              |3                |3            |
|000031 |9999      |          |102      |123|1234             |1          |2          |1         |1              |1                |1            |
|000032 |9998      |DeviceName|0        |123|1234             |0          |0          |0         |4              |4                |4            |

Given a DeviceInfo service
Given NOT NORMAL pricing System Configuration (PricingType = 4)
When I get DeviceInfo for storeid{000031} and deviceid{9999}
Then ResultCode should be 0
Then deviceid should be {9999}
Then devicename should be {}
Then logsize should be {1}
Then savelogfile should be {2}
Then logautoupload should be {1}
Then pricingtype should be {4}
Then retailstoreid should be {000031}
Then printer should be notnull
Then printerid should be 102
Then printername should be {Test Printer 2}
Then description should be {Unit test printer 2}
Then linkposterminalid should be 1234
Then queuebusterlink should be {1}
Then authorizationlink should be {1}
Then signaturelink should be {1}
Then the DeviceInfo should have the following JSON format:
{"DeviceInfo":{"DeviceID":"9999","Name":"","RetailStoreID":"000031","LogAutoUpload":"1","LogSize":"1","SaveLogFile":"2","POSLink":"1234","PricingType":"4","Printer":"102","PrinterInfo":{"PrinterID":"102","PrinterName":"Test Printer 2","PrinterDescription":"Unit test printer 2","Status":"Active"},"TillID":"123","QueueBusterLink":"1","AuthorizationLink":"1","SignatureLink":"1","EjSequence":0,"Status":"Active"},,}

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid is null and deviceid is not null/empty
Given a DeviceInfo service
When I get DeviceInfo for storeid{null} and deviceid{9999}
Then deviceid should be {9999}
Then retailstoreid should be {null}
Then ResultCode should be 224

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid is empty and deviceid is not null
Given a DeviceInfo service
When I get DeviceInfo for storeid{} and deviceid{9999}
Then deviceid should be {9999}
Then retailstoreid should be {null}
Then ResultCode should be 224

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid is not null/empty and deviceid is null
Given a DeviceInfo service
When I get DeviceInfo for storeid{000031} and deviceid{null}
Then deviceid should be {null}
Then retailstoreid should be {000031}
Then ResultCode should be 224

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid is not null/empty and deviceid is empty
Given a DeviceInfo service
When I get DeviceInfo for storeid{000031} and deviceid{}
Then deviceid should be {null}
Then retailstoreid should be {000031}
Then ResultCode should be 224

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid and deviceid are null
Given a DeviceInfo service
When I get DeviceInfo for storeid{null} and deviceid{null}
Then deviceid should be {null}
Then retailstoreid should be {null}
Then ResultCode should be 224

Scenario: Test Get Peripheral Device Info from DeviceInfo service where storeid and deviceid are empty
Given a DeviceInfo service
When I get DeviceInfo for storeid{} and deviceid{}
Then deviceid should be {null}
Then retailstoreid should be {null}
Then ResultCode should be 224