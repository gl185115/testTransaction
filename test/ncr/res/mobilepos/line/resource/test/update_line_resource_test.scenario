Scenario: Update a line successfully.
Given an empty table for line 
Given a line table
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-004			|line 4				|local 4		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 4		|test line 4		|テストライン4		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|

!-- Successful update of different record
Given a line resource
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|0032			|Dpt-001	|Line-004	|{"RetailStoreID": "000031", "Line": "Line1", "Description":{en:"sample line 1", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountFlag":1, "DiscountAmount":20, "TaxType":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line1				|sample line 1		|サンプルライン1		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 4		|test line 4		|テストライン4		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}

!-- Successful update of different record 
Given a line resource
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|0032			|Dpt-001	|Test Line 4|{"RetailStoreID": "000031", "Line": "Test Line 5", "Description":{en:"sample line 5", jp:"サンプルライン4"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountFlag":1, "DiscountAmount":20, "TaxType":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line1				|sample line 1		|サンプルライン1		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|

Then the result code should be {0}


!-- Successful update of the same record
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|201		|Line1		|{"RetailStoreID": "000031", "Line": "Line123", "Description":{en:"sample line 1", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountFlag":1, "DiscountAmount":20, "TaxType":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line123			|sample line 1		|サンプルライン1		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}


!-- Successful update with empty name
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|201		|Line123	|{"RetailStoreID": "000031", "Line": "Line123", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountFlag":1, "DiscountAmount":20, "TaxType":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line123			|					|サンプルライン1		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}


!-- Successful update with discount flag to NULL and AgeRestrictedFlag to 1
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|201		|Line123	|{"RetailStoreID": "000031", "Line": "Line123", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line123			|					|サンプルライン1		|201		|1		|0		|1				|null			|null			|20.0				|25.0			|1					|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}

!-- Successful update to different department
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|201		|Line123	|{"RetailStoreID": "000031", "Line": "Line123", "Description":{en:"", jp:"サンプルライン1"}, "Department":"202", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|000031			|Line123			|					|サンプルライン1		|202		|1		|0		|1				|null			|null			|20.0				|25.0			|1					|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}

!-- Fail update to different department but under different store
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|202		|Line123	|{"RetailStoreID": "000031", "Line": "Line123", "Description":{en:"", jp:"サンプルライン1"}, "Department":"342", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the result code should be {1404}

!-- Fail update to duplicate
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|202		|Line123	|{"RetailStoreID": "000031", "Line": "Test Line 5", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the result code should be {1401}

!-- Fail update to when retailstoreid not passed
When the following line is updated:
|department	|lineid		|linejson|
|202		|Line123	|{"RetailStoreID": "000031", "Line": "Test Line 6", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the result code should be {154}


!-- Fail update when department not passed
When the following line is updated:
|retailstoreid	|lineid		|linejson|
|000031			|Line123	|{"RetailStoreID": "000031", "Line": "Test Line 6", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the result code should be {154}

!-- Fail update lineid not passed
When the following line is updated:
|retailstoreid	|department	|linejson|
|000031			|202		|{"RetailStoreID": "000031", "Line": "Test Line 6", "Description":{en:"", jp:"サンプルライン1"}, "Department":"201", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the result code should be {154}

!-- Successful update to enterprise Store
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|202		|Line123	|{"RetailStoreID": "0", "Line": "Test Line En", "Description":{en:"", jp:"サンプルライン1"}, "Department":"102", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|0				|Test Line En		|					|サンプルライン1		|102		|1		|0		|1				|null			|null			|20.0				|25.0			|1					|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}

!-- Fail update non existing line
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|000031			|202		|Line12344	|{"RetailStoreID": "0", "Line": "Test Line En", "Description":{en:"", jp:"サンプルライン1"}, "Department":"102", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1, "TaxRate":0}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|0				|Test Line En		|					|サンプルライン1		|102		|1		|0		|1				|null			|null			|20.0				|25.0			|1					|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {1400}


!-- Successful update to enterprise Store
When the following line is updated:
|retailstoreid	|department	|lineid		|linejson|
|0			|102		|Test Line En	|{"RetailStoreID": "0", "Line": "Test Line En", "Description":{en:"", jp:"サンプルライン1"}, "Department":"102", "DiscountRate":25, "DiscountType":1, "DiscountAmount":20, "TaxType":1, "AgeRestrictedFlag":1}|
Then the following lines in the database should be:
|RetailStoreID	|Line				|DescriptionEN   	|DescriptionJP	|Department	|TaxType|TaxRate|DiscountType	|ExceptionFlag	|DiscountFlag 	|DiscountAmount		|DiscountRate	|AgeRestrictedFlag	|InheritFlag	|SubSmallInt5|
|0				|Test Line En		|					|サンプルライン1		|102		|1		|8		|1				|null			|null			|20.0				|25.0			|1					|null			|null		|
|000031			|Test Line 5		|sample line 5		|サンプルライン4		|201		|1		|0		|1				|null			|1				|20.0				|25.0			|null				|null			|null		|
|0031			|Line-001			|sample line 1		|サンプルライン1		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Line-002			|sample line 2		|サンプルライン2		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
|0032			|Test Line 3		|sample line 3		|サンプルライン3		|Dpt-001	|0		|0		|1				|0				|null			|20.0				|10.0			|0					|0				|0			|
Then the result code should be {0}















