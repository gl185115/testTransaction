Scenario: Test Item Entry with MixMatch Type 7
When the Web API Starts Up
Given a Promotion Service
Given a loaded dataset {items_for_mixmatch.xml}
Given a loaded dataset {mixmatch_promotions.xml}

Scenario: Item Entry (Single Entry With Quantity 1)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/00001)
!-- 00002, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/00002)
!-- 00003, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/00003)
!--       -------------------------------------
!--       300 x 12% = 36 (MMD)               36 (Total Discount)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775637|EAN-13    |1       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |100.0         |True        |0                |0         |
Then there should be no promotion data.

!-- Add Same Item with 1 Qty
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775637|EAN-13    |1       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |100.0         |True        |0                |0         |
Then there should be no promotion data.

!-- Add Another Item with 1 Qty
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775638","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00003      |8865545775638|EAN-13    |1       |0143      |sample product 8|サンプル製品8      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |1                |1         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |12                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |12                |
|3       |1007          |1007         |Mix Match 1007 Type 7|00003      |10                |
Then there should be no revoke

Scenario: Item Entry (Single Entry With Quantity = MMQ) 
!-- 00004, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00004, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00004, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!--       -------------------------------------
!--       300 x 12% = 36 (MMD)               36 (Discount/00004)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":3}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00004      |8865545775637|EAN-13    |3       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |300.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00004      |36                |
Then there should be no revoke

Scenario: Item Entry (Trigger Mixmatch By Second Item Entry of Different Item)
!-- 00001, 100 / 270 = 0.37037 * 32 = 11.85 ~ 12 (Discount/Item)
!-- 00001, 100 / 270 = 0.37037 * 32 = 11.85 ~ 12 (Discount/Item)
	-------------------------------------------
	00001,                                    24 (Discount/00001)
!-- 00002,  70 / 270 = 0.25926 * 32 =  8.29 ~  8 (Discount/00002)
!--       -------------------------------------
!--       270 x 12% = 32.4 ~ 32 (MMD)        32 (Total Discount) 
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":2}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775637|EAN-13    |2       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |200.0         |True        |0                |0         |
Then there should be no promotion data.

!-- Add Another Item with 1 Qty
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775639","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775639|EAN-13    |1       |0143      |sample product 9|サンプル製品9      |70.0                 |0.0     |0.0           |70.0                |70.0          |True        |0                |null      |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |24                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |8                 |
Then there should be no revoke

Scenario: Item Entry (Excess discount subtracted to the last entry to be equal to MMD)
!-- 00001,  90 / 270 = 0.33333 * 32 = 10.66 ~ 11 (Discount/00001)
!-- 00002,  90 / 270 = 0.33333 * 32 = 10.66 ~ 11 (Discount/00002)
!-- 00003,  90 / 270 = 0.33333 * 32 = 10.66 ~ 11 (Discount/00003)
!--       -------------------------------------
!--       270 x 12% = 32.4 ~ 32 (MMD)        33 (Total Discount) 
!--                                        - 32
!--       -------------------------------------
!--                                           1 (Excess)
!-- 00003,                                 - 11 (Discount/00003)
!--       -------------------------------------
!--                                          10 (Discount/00003) *Final Discount of ItemEntry 00003
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775638","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775638|EAN-13    |1       |0143      |sample product 8|サンプル製品8      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |1                |1         |
Then there should be no promotion data.

!-- Add Same Item with 1 Qty
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775638","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775638|EAN-13    |1       |0143      |sample product 8|サンプル製品8      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |1                |1         |
Then there should be no promotion data.

!-- Add Same Item with 1 Qty
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775638","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00003      |8865545775638|EAN-13    |1       |0143      |sample product 8|サンプル製品8      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |1                |1         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |11                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |11                |
|3       |1007          |1007         |Mix Match 1007 Type 7|00003      |10                |
Then there should be no revoke

Scenario: Item Entry (Single entry with Quantity > MMQ) 
!-- 00001, (3x100)300 x 12% = 36        
!-- 00001, (4x100)400 x 12% = 48 - 36 = 12 
!--       -------------------------------
!--        				    = (36 + 12) = 48 (Discount/00001)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":4}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775637|EAN-13    |4       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |400.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
Then there should be no revoke

!-- Add Same Item with Quantity 1
!-- 00001, (3x100)  300 x 12% = 36
!-- 00001, (300+100)400 x 12% = 48 - 36 = 12
!-- 00002, (400+100)500 x 12% = 60 - 36 - 12 = 12 (Discount/00002)
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775637|EAN-13    |1       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |100.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |12                |
Then there should be revoke

!-- Add Another Item with Quantity 1
!-- 00001, (3x100)  300 x 12% = 36
!-- 00001, (300+100)400 x 12% = 48 - 36 = 12
!-- 00002, (400+100)500 x 12% = 60 - 36 - 12 = 12 
!-- 00003, (500+90) 590 x 12% = 70 - 36 - 12 - 12 = 10 (Discount/00003)
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775638","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00003      |8865545775638|EAN-13    |1       |0143      |sample product 8|サンプル製品8      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |1                |1         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |12                |
|3       |1007          |1007         |Mix Match 1007 Type 7|00003      |10                |
Then there should be revoke

!-- Add Another Item with Quantity 2
!-- 00001, (3x100)  300 x 12% = 36
!-- 00001, (300+100)400 x 12% = 48 - 36 = 12
!-- 00002, (400+100)500 x 12% = 60 - 36 - 12 = 12 
!-- 00003, (500+90) 590 x 12% = 70 - 36 - 12 - 12 = 10
!-- 00004, (590+70) 660 x 12% = 79 - 36 - 12 - 12 - 10 = 9 (Discount/00004)
!-- 00004, (660+70) 730 x 12% = 87 - 36 - 12 - 12 - 10 - 9 = 8 (Discount/00004) 
!--       ----------------------------------------------------
!--                                                    = 9 + 8 = 17 (Discount/0004) *Final Discount Of 00004
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775639","ItemIDType":"EAN-13","Quantity":2}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00004      |8865545775639|EAN-13    |2       |0143      |sample product 9|サンプル製品9      |70.0                 |0.0     |0.0           |70.0                |140.0         |True        |0                |null      |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |12                |
|3       |1007          |1007         |Mix Match 1007 Type 7|00003      |10                |
|4       |1007          |1007         |Mix Match 1007 Type 7|00004      |17                |
Then there should be revoke

Scenario: Item Entry (First Entry Qty > MMQ, Second Entry Qty = MMQ)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!--       -------------------------------------
!--       300 x 12% = 36 (MMD)               36 (MMD1)
!-- 00001, (300+100) 400 * 12% = 48 - 36  =  12
!--       -------------------------------------
!--                                       = 48 (Discount/00001) *Final Discount of 00001
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":4}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775637|EAN-13    |4       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |400.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
Then there should be no revoke

!-- 00001, 300 x 12% = 36 
!-- 00001, 400 x 12% = 48 - 36 = 12
!-- 00002, (400+70) 470 x 12% = 56.4 ~ 56 - 36 - 12 = 8
!-- 00002, (470+70) 540 x 12% = 64.8 ~ 64 - 36 - 12 - 8 = 8  
!-- 00002, (540+70) 610 x 12% = 73.2 ~ 73 - 36 - 12 - 8 - 8 = 9
!--        -----------------------------------------------
!--                                            = (8 + 8 + 9) = 25  
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775639","ItemIDType":"EAN-13","Quantity":3}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775639|EAN-13    |3       |0143      |sample product 9|サンプル製品9      |70.0                 |0.0     |0.0           |70.0                |210.0         |True        |0                |null      |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |48                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |25                |
Then there should be revoke

Scenario: Item Entry (First Entry Qty = MMQ, Second Entry Qty = MMQ)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!-- 00001, 100 / 300 = 0.33333 * 36 = 11.99 ~ 12 (Discount/Item)
!--       -------------------------------------
!--       300 x 12% = 36 (MMD)               36 (MMD)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":3}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775637|EAN-13    |3       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |300.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |36                |
Then there should be no revoke

!-- 00001, 300 x 12% = 36
!-- 00002, 400 x 12% = 48 - 36 = 12
!-- 00002, 500 x 12% = 60 - 36 - 12 = 12
!-- 00002, 600 x 12% = 72 - 36 - 12 - 12 = 12
!--       -------------------------------------
!-- 00002, 12 + 12 + 12 = 36 *Final MMD of 00002      
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775637","ItemIDType":"EAN-13","Quantity":3}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775637|EAN-13    |3       |0143      |sample product 7|サンプル製品7      |100.0                |0.0     |0.0           |100.0               |300.0         |True        |0                |0         |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1007          |1007         |Mix Match 1007 Type 7|00001      |36                |
|2       |1007          |1007         |Mix Match 1007 Type 7|00002      |36                |
Then there should be revoke

