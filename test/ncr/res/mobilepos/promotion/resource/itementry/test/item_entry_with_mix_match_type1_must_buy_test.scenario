Scenario: Test Item Entry with MixMatch Type 1 for MustBuy
When the Web API Starts Up
Given a Promotion Service
Given a loaded dataset {items_for_mustbuy_mixmatch.xml}
Given a loaded dataset {mixmatch_mustbuy_promotions.xml}

Scenario: UnSuccessful Must Buy MixMatch (No Must Buy Items)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775622","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775622|EAN-13    |1       |0143      |sample product 2|サンプル製品2      |100.0                |0.0     |0.0           |100.0               |100.0         |True        |0                |1         |
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775623","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775623|EAN-13    |1       |0143      |sample product 3|サンプル製品3      |120.0                |0.0     |0.0           |120.0               |120.0         |True        |0                |0         |
!-- ADD the Third Item for Mix_Match but there are no Mix Match Discount.
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775624","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00003      |8865545775624|EAN-13    |1       |0143      |sample product 4|サンプル製品4      |150.0                |0.0     |0.0           |150.0               |150.0         |False       |0                |1         |
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775625","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00004      |8865545775625|EAN-13    |1       |0143      |sample product 5|サンプル製品5      |30.0                 |0.0     |0.0           |30.0                |30.0          |True        |1                |1         |
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775625","Department":"0143","Description":{"en":"sample product 5","jp":"サンプル製品5"},"RegularSalesUnitPrice":30.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":30.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"CouponFlag":"1","EmpPrice1":30.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00004","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":30.0,"InputType":0},"EntryFlag":0},"NCRWSSExtendedResultCode":0,"NCRWSSResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00005","ItemID":"8865545775626","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00005      |8865545775626|EAN-13    |1       |0143      |sample product 6|サンプル製品6      |220.0                |0.0     |0.0           |220.0               |220.0         |True        |1                |0         |
!-- ADD the Sixth Item for Mix_Match but there are no Mix Match Discount.
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00006","ItemID":"8865545775627","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00006      |8865545775627|EAN-13    |1       |0143      |sample product 7|サンプル製品7      |300.0                |0.0     |0.0           |300.0               |300.0         |True        |0                |1         |

Scenario: Successful Must Buy MixMatch (ItemEntry using a single item)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00001      |8865545775621|EAN-13    |1       |0143      |sample product 1|サンプル製品1      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |0                |null      |
!-- 1
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00002      |8865545775621|EAN-13    |1       |0143      |sample product 1|サンプル製品1      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |0                |null      |
!-- 2
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then Sale data should be :
|ItemEntryID|ItemID       |ItemIDType|Quantity|Department|DescriptionEN   |DescriptionJP   |RegularSalesUnitPrice|Discount|DiscountAmount|ActualSalesUnitPrice|ExtendedAmount|Discountable|AgeRestrictedFlag|CouponFlag|
|00003      |8865545775621|EAN-13    |1       |0143      |sample product 1|サンプル製品1      |90.0                 |0.0     |0.0           |90.0                |90.0          |True        |0                |null      |
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00003      |7|
|2       |1111          |1111         |Mix Match 1111 Type 1|00002      |7|
|3       |1111          |1111         |Mix Match 1111 Type 1|00001      |6|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00003","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":7,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":7,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":6,"Quantity":1}],"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |7|
|2       |1111          |1111         |Mix Match 1111 Type 1|00003      |7|
|3       |1111          |1111         |Mix Match 1111 Type 1|00002      |6|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00004","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":7,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":7,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":6,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00005","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00005      |7|
|2       |1111          |1111         |Mix Match 1111 Type 1|00004      |7|
|3       |1111          |1111         |Mix Match 1111 Type 1|00003      |6|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00005","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":7,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":7,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":6,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00006","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00006      |7|
|2       |1111          |1111         |Mix Match 1111 Type 1|00005      |7|
|3       |1111          |1111         |Mix Match 1111 Type 1|00004      |6|
|4       |1111          |1111         |Mix Match 1111 Type 1|00003      |7|
|5       |1111          |1111         |Mix Match 1111 Type 1|00002      |7|
|6       |1111          |1111         |Mix Match 1111 Type 1|00001      |6|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00006","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":7,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":7,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":6,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":7,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":7,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":6,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}

Scenario: Item Entry (full quantity) 
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":6}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00001      |20|
|2       |1111          |1111         |Mix Match 1111 Type 1|00001      |20|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00001","ItemIDType":"EAN-13","Quantity":6,"ExtendedAmount":540.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":20,"Quantity":3},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":20,"Quantity":3}],"NCRWSSExtendedResultCode":0,"NCRWSSResultCode":0},"NCRWSSExtendedResultCode":0,"NCRWSSResultCode":0}

Scenario: Successful Must Buy MixMatch (ItemEntry using 2 items having mustbuy flag, 2nd Item price > 1st Item price)
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00001","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00002","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775628","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00003      |11|
|2       |1111          |1111         |Mix Match 1111 Type 1|00002      |10|
|3       |1111          |1111         |Mix Match 1111 Type 1|00001      |9|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775628","Department":"0143","Description":{"en":"sample product 8","jp":"サンプル製品8"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00003","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":11,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":10,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":9,"Quantity":1}],"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00003      |11|
|2       |1111          |1111         |Mix Match 1111 Type 1|00004      |10|
|3       |1111          |1111         |Mix Match 1111 Type 1|00002      |9|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00004","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":11,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":10,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":9,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00005","ItemID":"8865545775628","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00005      |14|
|2       |1111          |1111         |Mix Match 1111 Type 1|00003      |14|
|3       |1111          |1111         |Mix Match 1111 Type 1|00004      |12|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775628","Department":"0143","Description":{"en":"sample product 8","jp":"サンプル製品8"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00005","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":14,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":14,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":12,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00006","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00005      |14|
|2       |1111          |1111         |Mix Match 1111 Type 1|00003      |14|
|3       |1111          |1111         |Mix Match 1111 Type 1|00006      |12|
|4       |1111          |1111         |Mix Match 1111 Type 1|00004      |7|
|5       |1111          |1111         |Mix Match 1111 Type 1|00002      |7|
|6       |1111          |1111         |Mix Match 1111 Type 1|00001      |6|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00006","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":14,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":14,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":12,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":7,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":7,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":6,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}

Scenario: Successful Must Buy MixMatch Combination
When a Begin Transaction at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"TransactionMode":"0","OperatorID": "0003","BeginDateTime":"2012-12-20T09:30:47.00"}}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00001","ItemID":"8865545775628","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775628","Department":"0143","Description":{"en":"sample product 8","jp":"サンプル製品8"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00001","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00002","ItemID":"8865545775622","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then there should be no promotion data.
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775622","Department":"0143","Description":{"en":"sample product 2","jp":"サンプル製品2"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"CouponFlag":"1","EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00002","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00003","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00002      |14|
|2       |1111          |1111         |Mix Match 1111 Type 1|00001      |14|
|3       |1111          |1111         |Mix Match 1111 Type 1|00003      |12|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00003","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":14,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":14,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":12,"Quantity":1}],"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00004","ItemID":"8865545775627","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00002      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00001      |50|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775627","Department":"0143","Description":{"en":"sample product 7","jp":"サンプル製品7"},"RegularSalesUnitPrice":300.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":300.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"CouponFlag":"1","EmpPrice1":300.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00004","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":300.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":50,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00005","ItemID":"8865545775628","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00002      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00005      |50|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775628","Department":"0143","Description":{"en":"sample product 8","jp":"サンプル製品8"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00005","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":50,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00006","ItemID":"8865545775622","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00006      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00005      |50|
|4       |1111          |1111         |Mix Match 1111 Type 1|00002      |14|
|5       |1111          |1111         |Mix Match 1111 Type 1|00001      |14|
|6       |1111          |1111         |Mix Match 1111 Type 1|00003      |12|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775622","Department":"0143","Description":{"en":"sample product 2","jp":"サンプル製品2"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"CouponFlag":"1","EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00006","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":50,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":14,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":14,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":12,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00007","ItemID":"8865545775622","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00007      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00005      |50|
|4       |1111          |1111         |Mix Match 1111 Type 1|00006      |17|
|5       |1111          |1111         |Mix Match 1111 Type 1|00002      |17|
|6       |1111          |1111         |Mix Match 1111 Type 1|00001      |16|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775622","Department":"0143","Description":{"en":"sample product 2","jp":"サンプル製品2"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"CouponFlag":"1","EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00007","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00007","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":50,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":17,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":17,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":16,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSExtendedResultCode":0,"NCRWSSResultCode":0},"NCRWSSExtendedResultCode":0,"NCRWSSResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00008","ItemID":"8865545775621","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00007      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00005      |50|
|4       |1111          |1111         |Mix Match 1111 Type 1|00006      |17|
|5       |1111          |1111         |Mix Match 1111 Type 1|00002      |17|
|6       |1111          |1111         |Mix Match 1111 Type 1|00001      |16|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775621","Department":"0143","Description":{"en":"sample product 1","jp":"サンプル製品1"},"RegularSalesUnitPrice":90.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":90.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":0,"EmpPrice1":90.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00008","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":90.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00007","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":50,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":17,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":17,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":16,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}
When a Item Entry at promotion with parameters RetailStoreID{0031} WorkStationId{1111} SequenceNo{1} TransactionJson{{"Sale":{"ItemEntryID":"00009","ItemID":"8865545775628","ItemIDType":"EAN-13","Quantity":1}}}
Then the Result Code is 0
Then promotion should have the following data :
|RewardID|EarnedRewardID|PromotionCode|DiscountDescription  |ItemEntryID|UnitDiscountAmount|
|1       |1111          |1111         |Mix Match 1111 Type 1|00004      |150|
|2       |1111          |1111         |Mix Match 1111 Type 1|00007      |50|
|3       |1111          |1111         |Mix Match 1111 Type 1|00009      |50|
|4       |1111          |1111         |Mix Match 1111 Type 1|00006      |17|
|5       |1111          |1111         |Mix Match 1111 Type 1|00002      |17|
|6       |1111          |1111         |Mix Match 1111 Type 1|00005      |16|
|7       |1111          |1111         |Mix Match 1111 Type 1|00001      |11|
|8       |1111          |1111         |Mix Match 1111 Type 1|00008      |10|
|9       |1111          |1111         |Mix Match 1111 Type 1|00003      |9|
Then the JSON should have the following format : 
{"Transaction":{"TransactionMode":0,"Sale":{"ItemID":"8865545775628","Department":"0143","Description":{"en":"sample product 8","jp":"サンプル製品8"},"RegularSalesUnitPrice":100.0,"Discount":0.0,"DiscountFlag":0,"DiscountAmount":0.0,"ActualSalesUnitPrice":100.0,"Discountable":true,"TaxRate":0,"TaxType":0,"DiscountType":0,"NonSales":0,"SubInt10":0,"Line":"0143","Class":"000001","AgeRestrictedFlag":1,"EmpPrice1":100.0,"PSType":"","OrgSalesPrice1":0.0,"ItemEntryID":"00009","ItemIDType":"EAN-13","Quantity":1,"ExtendedAmount":100.0,"InputType":0},"EntryFlag":0},"Promotion":{"Discount":[{"RewardID":1,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00004","UnitDiscountAmt":150,"Quantity":1},{"RewardID":2,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00007","UnitDiscountAmt":50,"Quantity":1},{"RewardID":3,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00009","UnitDiscountAmt":50,"Quantity":1},{"RewardID":4,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00006","UnitDiscountAmt":17,"Quantity":1},{"RewardID":5,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00002","UnitDiscountAmt":17,"Quantity":1},{"RewardID":6,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00005","UnitDiscountAmt":16,"Quantity":1},{"RewardID":7,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00001","UnitDiscountAmt":11,"Quantity":1},{"RewardID":8,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00008","UnitDiscountAmt":10,"Quantity":1},{"RewardID":9,"EarnedRewardID":"1111","PromotionCode":"1111","DiscountDescription":"Mix Match 1111 Type 1","ItemEntryID":"00003","UnitDiscountAmt":9,"Quantity":1}],"Revoke":{"EarnedRewardID":"1111"},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0},"NCRWSSResultCode":0,"NCRWSSExtendedResultCode":0}

