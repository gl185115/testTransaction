Scenario: Sign on success
Given an initial data from {MST_USER_CREDENTIALS_forSignOnSignOff.xml}
Given a Credential Resource
When signing on operator:{111} passcode:{333} terminal:{1234}
Then I should get resultcode {0}
Then Operator result should be
|operatorno|passcode|name|
|111| |Kimura Suzuki|

Scenario: Sign on fail (incorrect passcode)
Given a Credential Resource
When signing on operator:{111} passcode:{222} terminal:{1234}
Then I should get resultcode {306}
Then Operator result should be
|operatorno|passcode|name|
| | | |

Scenario: Sign on fail (operator not found)
Given a Credential Resource
When signing on operator:{asdadasdefef} passcode:{222} terminal:{1234}
Then I should get resultcode {305}
Then Operator result should be
|operatorno|passcode|name|
| | | |

Scenario: Demo Sign on fail (operator not found / no passcode)
Given a Credential Resource
When demo signing on operator:{asdadasd} passcode:{} terminal:{1234}
Then I should get resultcode {0}
Then Operator result should be
|operatorno|passcode|name|
|asdadasd|111| |

Scenario: Demo Sign on fail (operator not found / with passcode)
Given a Credential Resource
When demo signing on operator:{asdadasd} passcode:{123123} terminal:{1234}
Then I should get resultcode {0}
Then Operator result should be
|operatorno|passcode|name|
|asdadasd|111| |
When logging off operator:{asdadasd}
Then I should get resultcode {0}

Scenario: Demo Sign (operator existing / no passcode)
Given a Credential Resource
When demo signing on operator:{77777} passcode:{} terminal:{1234}
Then I should get resultcode {306}

Scenario: Signoff fail (operator not found)
Given a Credential Resource
When logging off operator:{6546546}
Then I should get resultcode {305}

!-- Test Operator's Permissions 
Scenario: Test the Operator's Permissions
Given an initial data from {MST_USER_CREDENTIALS_forSignOnSignOff.xml}
Then the MST_USER_CREDENTIALS database table should have the following row(s):
|operatorno|passcode|role|operatorname |operatortype|terminalid|storeid|
|001       |001     |NCR |Tanaka       |1           |777       |000031 |
|002       |002     |NCR |NULL         |2           |888       |000031 |
|003       |003     |NCR |NULL         |3           |NULL      |000031 |
|1         |111     |NCR |Taro Yamada  |0           |111       |00001  |
|11        |222     |NCR |Ichiro Suzuki|1           |222       |00001  |
|111       |333     |NCR |Kimura Suzuki|3           |333       |00001  |
|4444      |444     |NCR |Taro Suzuki  |4           |444       |00001  |
|55555     |555     |NCR |Haro Yamada  |5           |666       |00001  |
|77777     |NULL    |NCR |Ichiro Suzuki|2           |222       |00001  |
Then the PRM_GROUP_FUNCTION database table should have the following row(s):
|groupcode|groupname   |transactions|reports|settings|merchandise|administration|drawer|
|0        |guest       |True	    |True   |False   |False      |False         |False |
|1        |employee    |True	    |True   |False   |False      |False         |True  |
|2        |manager     |True	    |True   |True    |True       |False         |True  |
|3        |admin       |True	    |True   |True    |True       |True          |True  |

Scenario: SignOn a GUEST OperatorType
When signing on operator:{1} passcode:{111} terminal:{111}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>1</OperatorNo><Name>Taro Yamada</Name><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><OperatorType>0</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>false</Settings><Merchandise>false</Merchandise><Administration>false</Administration><Drawer>false</Drawer></Permissions></Details>

Scenario: SignOn an EMPLOYEE OperatorType
When signing on operator:{11} passcode:{222} terminal:{222}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>11</OperatorNo><Name>Ichiro Suzuki</Name><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><OperatorType>1</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>false</Settings><Merchandise>false</Merchandise><Administration>false</Administration><Drawer>true</Drawer></Permissions></Details>

Scenario: SignOn an Manager OperatorType (w/ First Sign On implementation)
When signing on operator:{77777} passcode:{777} terminal:{222}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>77777</OperatorNo><Name>Ichiro Suzuki</Name><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><OperatorType>2</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>true</Settings><Merchandise>true</Merchandise><Administration>false</Administration><Drawer>true</Drawer></Permissions></Details>

Scenario: SignOn an ADMIN OperatorType
When signing on operator:{111} passcode:{333} terminal:{333}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>111</OperatorNo><Name>Kimura Suzuki</Name><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><OperatorType>3</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>true</Settings><Merchandise>true</Merchandise><Administration>true</Administration><Drawer>true</Drawer></Permissions></Details>

Scenario: Demo Sign (Demo Operator Not yet Existing)
Given a Credential Resource
When demo signing on operator:{88888} passcode:{} terminal:{1234}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>88888</OperatorNo><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><PassCode>111</PassCode><OperatorType>0</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>false</Settings><Merchandise>false</Merchandise><Administration>false</Administration><Drawer>false</Drawer></Permissions></Details>

Scenario: Demo Sign (Demo Operator Existing (111 is the generated passcode))
Given a Credential Resource
When demo signing on operator:{88888} passcode:{111} terminal:{1234}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>88888</OperatorNo><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><PassCode>111</PassCode><OperatorType>0</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>false</Settings><Merchandise>false</Merchandise><Administration>false</Administration><Drawer>false</Drawer></Permissions></Details>

Scenario: SignOn an Unknown OperatorType
When signing on operator:{55555} passcode:{555} terminal:{666}
Then I should get resultcode {1002}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>1002</NCRWSSResultCode><OperatorType>0</OperatorType></Details>

Scenario: Demo Sign (Demo Operator Existing (But No Guest Permisson))
Given a Credential Resource
When demo signing on operator:{55555} passcode:{555} terminal:{666}
Then I should get resultcode {1002}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>1002</NCRWSSResultCode><OperatorType>0</OperatorType></Details>

Scenario: Demo Sign (Admin Operator SignOn as guest)
Given a Credential Resource
When demo signing on operator:{111} passcode:{333} terminal:{333}
Then I should get resultcode {0}
Then the Operator should have the following XML:
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Details><NCRWSSExtendedResultCode>0</NCRWSSExtendedResultCode><NCRWSSResultCode>0</NCRWSSResultCode><OperatorNo>111</OperatorNo><Name>Kimura Suzuki</Name><SignOnAt>21:05</SignOnAt><Date>Nov 22, '12</Date><PassCode>333</PassCode><OperatorType>3</OperatorType><Permissions><Transactions>true</Transactions><Reports>true</Reports><Settings>true</Settings><Merchandise>true</Merchandise><Administration>true</Administration><Drawer>true</Drawer></Permissions></Details>

!-- Updated row are: operator 77777 and 88888
Then the MST_USER_CREDENTIALS database table should have the following row(s):
|operatorno|passcode|role|operatorname |operatortype|terminalid|storeid|
|001       |001     |NCR |Tanaka       |1           |777       |000031 |
|002       |002     |NCR |NULL         |2           |888       |000031 |
|003       |003     |NCR |NULL         |3           |NULL      |000031 |
|1         |111     |NCR |Taro Yamada  |0           |111       |00001  |
|11        |222     |NCR |Ichiro Suzuki|1           |222       |00001  |
|111       |333     |NCR |Kimura Suzuki|3           |333       |00001  |
|4444      |444     |NCR |Taro Suzuki  |4           |444       |00001  |
|55555     |555     |NCR |Haro Yamada  |5           |666       |00001  |
|77777     |777     |NCR |Ichiro Suzuki|2           |222       |00001  |
|88888     |111     |NCR |NULL         |0           |1234      |NULL   |
