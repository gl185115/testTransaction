Scenario: Successfully get voucher list for a given set of parameters
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-24|0|
Then I should have the following data:
|companyId|storeId|voucherId|voucherName|voucherKanaName|businessDayDate|trainingFlag|salesItemCnt|salesItemAmt|
|01|0031|0101|‚i‚b‚aƒMƒtƒgŒ”|JCB|2015-08-24|0|1|500|
|01|0031|0102|‚t‚bƒMƒtƒgŒ”|UC|2015-08-24|0|5|1500|
|01|0031|0103|‚u‚h‚r‚`ƒMƒtƒgŒ”|VISA|null|0|0|0|
Then the result should be {RES_OK}

Scenario: Successfully get voucher list with a different businessDayDate and one of the data is deleted (DeleteFlag = 1)
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-25|0|
Then I should have the following data:
|companyId|storeId|voucherId|voucherName|voucherKanaName|businessDayDate|trainingFlag|salesItemCnt|salesItemAmt|
|01|0031|0101|‚i‚b‚aƒMƒtƒgŒ”|JCB|null|0|0|0|
|01|0031|0102|‚t‚bƒMƒtƒgŒ”|UC|null|0|0|0|
|01|0031|0103|‚u‚h‚r‚`ƒMƒtƒgŒ”|VISA|2015-08-25|0|10|2500|
Then the result should be {RES_OK}

Scenario: Successfully get voucher list with a different companyId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|02|0031|2015-08-25|0|
Then I should have the following data:
|companyId|storeId|voucherId|voucherName|voucherKanaName|businessDayDate|trainingFlag|salesItemCnt|salesItemAmt|
|02|0031|0030|‚i‚b‚aƒMƒtƒgŒ”|JCB·ÞÌÄ¹Ý|2015-08-25|0|1|500|
|02|0031|0034|‚t‚bƒMƒtƒgŒ”|UC·ÞÌÄ¹Ý|2015-08-25|0|5|1500|
Then the result should be {RES_OK}

Scenario: Successfully get voucher list with a different storeId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|02|0032|2015-08-25|0|
Then I should have the following data:
|companyId|storeId|voucherId|voucherName|voucherKanaName|businessDayDate|trainingFlag|salesItemCnt|salesItemAmt|
|02|0032|0037|‚u‚h‚r‚`ƒMƒtƒgŒ”|VISA·ÞÌÄ¹Ý|2015-08-25|0|10|2500|
Then the result should be {RES_OK}

Scenario: Successfully get voucher list for training mode (TrainingFlag = 1)
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|02|0031|2015-08-25|1|
Then I should have the following data:
|companyId|storeId|voucherId|voucherName|voucherKanaName|businessDayDate|trainingFlag|salesItemCnt|salesItemAmt|
|02|0031|0030|‚i‚b‚aƒMƒtƒgŒ”|JCB·ÞÌÄ¹Ý|2015-08-25|1|1|500|
|02|0031|0034|‚t‚bƒMƒtƒgŒ”|UC·ÞÌÄ¹Ý|2015-08-25|1|5|1500|
Then the result should be {RES_OK}

Scenario: Empty result set for non-existing companyId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|03|0031|2015-08-25|0|
Then the resulting voucher list should be empty
Then the result should be {RES_ERROR_NODATAFOUND}

Scenario: Empty result set for non-existing storeId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0033|2015-08-25|0|
Then the resulting voucher list should be empty
Then the result should be {RES_ERROR_NODATAFOUND}

Scenario: Empty result set for non-existing businessDayDate
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0032|2015-08-26|0|
Then the resulting voucher list should be empty
Then the result should be {RES_ERROR_NODATAFOUND}

Scenario: Empty result set for non-existing trainingFlag
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0032|2015-08-25|3|
Then the resulting voucher list should be empty
Then the result should be {RES_ERROR_NODATAFOUND}

Scenario: Get voucher list with null companyId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|null|0032|2015-08-25|0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Get voucher list with empty companyId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
||0032|2015-08-25|0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Get voucher list with null storeId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|null|2015-08-25|0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Get voucher list with empty storeId
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01||2015-08-25|0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Get voucher list with null businessDayDate
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|null|0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Get voucher list with empty businessDayDate
Given I have a Settlement resource and other resources
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031||0|
Then the result should be {RES_ERROR_INVALIDPARAMETER}

Scenario: Database throw Exceptions
Given I have a Settlement resource and other resources
Given that database is throwing an unexpected {DaoException}
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-25|0|
Then the result should be {RES_ERROR_GENERAL}
Given that database is throwing an unexpected {Exception}
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-25|0|
Then the result should be {RES_ERROR_GENERAL}
Given that database is throwing an unexpected {SQLException}
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-25|0|
Then the result should be {RES_ERROR_DB}
Given that database is throwing an unexpected {SQLStatementException}
When I request to get voucher list with the following data:
|companyId|storeId|businessDayDate|trainingFlag|
|01|0031|2015-08-25|0|
Then the result should be {RES_ERROR_DAO}